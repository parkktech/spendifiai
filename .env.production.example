# ============================================================
# SPENDWISE — Production Environment Configuration
# ============================================================
# Copy to .env on your production server and fill in all values.
# NEVER commit .env to version control.
# ============================================================

# ─── Application ───────────────────────────────────────────
APP_NAME=SpendWise
APP_ENV=production
APP_KEY=                    # Generate: php artisan key:generate --show
APP_DEBUG=false             # MUST be false in production
APP_URL=https://your-domain.com
FRONTEND_URL=https://your-domain.com

# ─── Database (PostgreSQL 15+) ─────────────────────────────
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1          # Or your managed DB host
DB_PORT=5432
DB_DATABASE=spendwise
DB_USERNAME=spendwise
DB_PASSWORD=                # Strong password required

# ─── Redis (7+) ───────────────────────────────────────────
# Required for queues, caching, and sessions
REDIS_HOST=127.0.0.1       # Or your managed Redis host
REDIS_PASSWORD=null         # Set if Redis requires auth
REDIS_PORT=6379
CACHE_STORE=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# ─── Mail ──────────────────────────────────────────────────
# Used for: password resets, email verification, tax export delivery, notifications
# Recommended: Mailgun, SES, or Postmark for production
MAIL_MAILER=smtp            # smtp, mailgun, ses, postmark
MAIL_HOST=                  # e.g., smtp.mailgun.org
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@your-domain.com
MAIL_FROM_NAME="SpendWise"

# Mailgun (if MAIL_MAILER=mailgun):
# MAILGUN_DOMAIN=mg.your-domain.com
# MAILGUN_SECRET=key-xxxxxxx

# SES (if MAIL_MAILER=ses):
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1

# ─── Plaid (Bank Integration) ─────────────────────────────
# Dashboard: https://dashboard.plaid.com/developers/keys
# Start with sandbox/development, apply for production access
PLAID_CLIENT_ID=            # From Plaid Dashboard -> Team Settings -> Keys
PLAID_SECRET=               # From Plaid Dashboard (use production secret)
PLAID_ENV=production        # sandbox | development | production
PLAID_WEBHOOK_URL=https://your-domain.com/api/v1/webhooks/plaid  # Required in production

# ─── Anthropic (AI Categorization) ────────────────────────
# Console: https://console.anthropic.com/
ANTHROPIC_API_KEY=          # From Anthropic Console -> API Keys
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# ─── Google OAuth (Social Login) ──────────────────────────
# Console: https://console.cloud.google.com/apis/credentials
# Enable: Google+ API, Gmail API
# Add authorized redirect URI: {APP_URL}/auth/google/callback
GOOGLE_CLIENT_ID=           # From Google Cloud Console
GOOGLE_CLIENT_SECRET=       # From Google Cloud Console
GOOGLE_REDIRECT_URI="${APP_URL}/auth/google/callback"

# ─── Google reCAPTCHA v3 ──────────────────────────────────
# Get keys: https://www.google.com/recaptcha/admin
# Choose reCAPTCHA v3 (invisible, score-based)
RECAPTCHA_SITE_KEY=         # Public key (used in frontend)
RECAPTCHA_SECRET_KEY=       # Secret key (server-side verification)
RECAPTCHA_THRESHOLD=0.5     # Score threshold (0.0 = bot, 1.0 = human)

# ─── Sanctum (API Auth) ───────────────────────────────────
SANCTUM_STATEFUL_DOMAINS=your-domain.com

# ─── Two-Factor Authentication ─────────────────────────────
TWO_FACTOR_ENABLED=true

# ─── Session / Security ───────────────────────────────────
SESSION_LIFETIME=120
SESSION_ENCRYPT=true

# ─── Logging ──────────────────────────────────────────────
LOG_CHANNEL=daily           # daily | stack | single | stderr (for Docker)
LOG_LEVEL=warning           # Use 'warning' in production (not 'debug')

# ─── Queue Worker ─────────────────────────────────────────
# Run: php artisan queue:work redis --tries=3 --timeout=90
# Consider Laravel Horizon for production queue management

# ─── Scheduler ────────────────────────────────────────────
# Add to crontab: * * * * * cd /path/to/app && php artisan schedule:run >> /dev/null 2>&1

# ─── TLS / Security Headers ──────────────────────────────
# Configure in your reverse proxy (Nginx/Caddy):
# - TLS 1.2+ only
# - HSTS header
# - X-Content-Type-Options: nosniff
# - X-Frame-Options: DENY
# - Content-Security-Policy (restrict to your domain)
