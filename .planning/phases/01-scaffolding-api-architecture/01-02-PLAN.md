---
phase: 01-scaffolding-api-architecture
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - app/Http/Controllers/Api/DashboardController.php
  - app/Http/Controllers/Api/PlaidController.php
  - app/Http/Controllers/Api/BankAccountController.php
  - app/Http/Controllers/Api/TransactionController.php
  - app/Http/Controllers/Api/AIQuestionController.php
  - app/Http/Controllers/Api/SubscriptionController.php
  - app/Http/Controllers/Api/SavingsController.php
  - app/Http/Controllers/Api/TaxController.php
  - app/Http/Controllers/Api/EmailConnectionController.php
  - app/Http/Controllers/Api/UserProfileController.php
  - app/Http/Resources/TransactionResource.php
  - app/Http/Resources/BankAccountResource.php
  - app/Http/Resources/BankConnectionResource.php
  - app/Http/Resources/SubscriptionResource.php
  - app/Http/Resources/AIQuestionResource.php
  - app/Http/Resources/SavingsRecommendationResource.php
  - app/Http/Resources/SavingsTargetResource.php
  - app/Http/Resources/SavingsPlanActionResource.php
  - app/Http/Requests/UpdateAccountPurposeRequest.php
  - app/Http/Requests/AnswerQuestionRequest.php
  - app/Http/Requests/BulkAnswerRequest.php
  - app/Http/Requests/UpdateTransactionCategoryRequest.php
  - app/Http/Requests/ExportTaxRequest.php
  - app/Http/Requests/SendToAccountantRequest.php
  - app/Http/Requests/SetSavingsTargetRequest.php
  - app/Http/Requests/UpdateFinancialProfileRequest.php
autonomous: true
must_haves:
  truths:
    - "php artisan route:list --path=api shows all routes pointing to 10 separate controllers, not SpendWiseController"
    - "Each API controller injects services via constructor dependency injection"
    - "Each API controller uses policy authorization where applicable"
    - "Each API controller returns data via API Resources (not raw JSON construction)"
    - "All write endpoints use FormRequest classes for validation (no inline $request->validate())"
  artifacts:
    - path: "app/Http/Controllers/Api/DashboardController.php"
      provides: "Dashboard composite data endpoint"
      min_lines: 80
    - path: "app/Http/Controllers/Api/PlaidController.php"
      provides: "Plaid link token, exchange, sync, disconnect"
      exports: ["createLinkToken", "exchangeToken", "sync", "disconnect"]
    - path: "app/Http/Controllers/Api/BankAccountController.php"
      provides: "Account listing and purpose update"
      exports: ["index", "updatePurpose"]
    - path: "app/Http/Controllers/Api/TransactionController.php"
      provides: "Transaction listing with filters and category update"
      exports: ["index", "updateCategory"]
    - path: "app/Http/Controllers/Api/AIQuestionController.php"
      provides: "Question listing, individual answer, bulk answer"
      exports: ["index", "answer", "bulkAnswer"]
    - path: "app/Http/Controllers/Api/SubscriptionController.php"
      provides: "Subscription listing and detection trigger"
      exports: ["index", "detect"]
    - path: "app/Http/Controllers/Api/SavingsController.php"
      provides: "Full savings feature: recommendations, analysis, targets, plans, pulse"
      exports: ["recommendations", "analyze", "dismiss", "apply", "setTarget", "getTarget", "regeneratePlan", "respondToAction", "pulseCheck"]
    - path: "app/Http/Controllers/Api/TaxController.php"
      provides: "Tax summary, export, send to accountant, download"
      exports: ["summary", "export", "sendToAccountant", "download"]
    - path: "app/Http/Controllers/Api/EmailConnectionController.php"
      provides: "Email connection stubs for Phase 3 implementation"
      exports: ["connect", "callback", "sync", "disconnect"]
    - path: "app/Http/Controllers/Api/UserProfileController.php"
      provides: "Financial profile CRUD and account deletion"
      exports: ["updateFinancial", "showFinancial", "deleteAccount"]
    - path: "app/Http/Resources/TransactionResource.php"
      provides: "Transaction JSON serialization with category accessor and nested account"
      min_lines: 15
    - path: "app/Http/Resources/BankAccountResource.php"
      provides: "Bank account JSON serialization respecting $hidden"
      min_lines: 10
    - path: "app/Http/Requests/UpdateAccountPurposeRequest.php"
      provides: "Validation for account purpose update"
      contains: "rules"
    - path: "app/Http/Requests/SetSavingsTargetRequest.php"
      provides: "Validation for savings target creation"
      contains: "monthly_target"
  key_links:
    - from: "routes/api.php"
      to: "app/Http/Controllers/Api/*.php"
      via: "Route controller references"
      pattern: "DashboardController|PlaidController|BankAccountController|TransactionController"
    - from: "app/Http/Controllers/Api/TransactionController.php"
      to: "app/Http/Resources/TransactionResource.php"
      via: "Resource return type"
      pattern: "TransactionResource::collection|new TransactionResource"
    - from: "app/Http/Controllers/Api/TransactionController.php"
      to: "app/Http/Requests/UpdateTransactionCategoryRequest.php"
      via: "FormRequest type hint in method signature"
      pattern: "UpdateTransactionCategoryRequest"
    - from: "app/Http/Controllers/Api/SavingsController.php"
      to: "app/Services/AI/SavingsTargetPlannerService.php"
      via: "Constructor dependency injection"
      pattern: "private readonly SavingsTargetPlannerService"
    - from: "app/Http/Controllers/Api/BankAccountController.php"
      to: "app/Policies/BankAccountPolicy.php"
      via: "Policy authorization"
      pattern: "this->authorize"
---

<objective>
Split the 939-line SpendWiseController into 10 focused API controllers, create 8 API Resources for consistent JSON output, and create 8 Form Request validation classes for all write endpoints. Each controller uses constructor dependency injection for services, policy authorization for access control, and returns data through API Resources.

Purpose: Decompose the monolithic controller into a maintainable, testable architecture following Laravel conventions. This satisfies requirements CTRL-01 through CTRL-05 and sets up the controller layer for all subsequent phases.

Output: 10 API controllers, 8 API Resources, 8 Form Requests -- all properly wired to existing routes, services, and policies.
</objective>

<execution_context>
@/home/jratz/.claude/get-shit-done/workflows/execute-plan.md
@/home/jratz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-scaffolding-api-architecture/01-RESEARCH.md
@.planning/phases/01-scaffolding-api-architecture/01-01-SUMMARY.md
@app/Http/Controllers/Api/SpendWiseController.php
@app/Services/PlaidService.php
@app/Services/AI/TransactionCategorizerService.php
@app/Services/AI/SavingsAnalyzerService.php
@app/Services/AI/SavingsTargetPlannerService.php
@app/Services/SubscriptionDetectorService.php
@app/Services/TaxExportService.php
@app/Models/Transaction.php
@app/Models/BankAccount.php
@app/Models/Subscription.php
@app/Models/SavingsTarget.php
@app/Models/SavingsProgress.php
@app/Policies/TransactionPolicy.php
@app/Policies/BankAccountPolicy.php
@app/Policies/AIQuestionPolicy.php
@app/Policies/SubscriptionPolicy.php
@routes/api.php
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create all 8 API Resources and 8 Form Requests</name>
  <files>
    app/Http/Resources/TransactionResource.php
    app/Http/Resources/BankAccountResource.php
    app/Http/Resources/BankConnectionResource.php
    app/Http/Resources/SubscriptionResource.php
    app/Http/Resources/AIQuestionResource.php
    app/Http/Resources/SavingsRecommendationResource.php
    app/Http/Resources/SavingsTargetResource.php
    app/Http/Resources/SavingsPlanActionResource.php
    app/Http/Requests/UpdateAccountPurposeRequest.php
    app/Http/Requests/AnswerQuestionRequest.php
    app/Http/Requests/BulkAnswerRequest.php
    app/Http/Requests/UpdateTransactionCategoryRequest.php
    app/Http/Requests/ExportTaxRequest.php
    app/Http/Requests/SendToAccountantRequest.php
    app/Http/Requests/SetSavingsTargetRequest.php
    app/Http/Requests/UpdateFinancialProfileRequest.php
  </files>
  <action>
Create all API Resources and Form Requests FIRST since the controllers depend on them.

**API Resources (8 files in app/Http/Resources/):**

1. **TransactionResource** -- Key fields: id, merchant (use merchant_normalized ?? merchant_name), amount (cast to float), date (formatted Y-m-d), category (user_category ?? ai_category ?? 'Uncategorized'), review_status, expense_type, account_purpose, tax_deductible, is_subscription. Conditionally include: `'account' => new BankAccountResource($this->whenLoaded('bankAccount'))`, `'ai_question' => new AIQuestionResource($this->whenLoaded('aiQuestion'))`.

2. **BankAccountResource** -- Key fields: id, name (use nickname ?? name), official_name, type, subtype, mask, purpose, business_name, tax_entity_type, include_in_spending, include_in_tax_tracking, current_balance, available_balance. Conditionally include: `'connection' => new BankConnectionResource($this->whenLoaded('bankConnection'))`. Do NOT expose plaid_account_id or ein (they're in $hidden).

3. **BankConnectionResource** -- Minimal: id, institution_name, status, last_synced_at (formatted), created_at. Most fields are $hidden on the model.

4. **SubscriptionResource** -- Key fields: id, merchant_name, merchant_normalized, amount (float), frequency, category, status, is_essential, last_charge_date (formatted), next_expected_date (formatted), last_used_at, annual_cost (float), months_active, charge_history.

5. **AIQuestionResource** -- Key fields: id, question, options, ai_confidence, ai_best_guess, user_answer, status, question_type, answered_at. Conditionally include: transaction context via `'transaction' => new TransactionResource($this->whenLoaded('transaction'))`.

6. **SavingsRecommendationResource** -- Key fields: id, title, description, monthly_savings (float), annual_savings (float), difficulty, category, impact, status, related_transaction_ids, related_subscription_ids, generated_at, applied_at, dismissed_at.

7. **SavingsTargetResource** -- Key fields: id, monthly_target (float), motivation, target_start_date, target_end_date, goal_total (float), is_active. Conditionally include: `'actions' => SavingsPlanActionResource::collection($this->whenLoaded('actions'))`, `'progress' => $this->whenLoaded('progress')`.

8. **SavingsPlanActionResource** -- Key fields: id, title, description, how_to, monthly_savings (float), current_spending (float), recommended_spending (float), category, difficulty, impact, priority, is_essential_cut, related_merchants, related_subscription_ids, status, accepted_at, rejected_at, rejection_reason.

**Form Requests (8 files in app/Http/Requests/):**

Extract ALL validation rules from SpendWiseController methods. Each FormRequest includes `authorize()` returning true (or using policy check where applicable) and `rules()` with the exact validation rules from the controller.

1. **UpdateAccountPurposeRequest** -- authorize: `$this->user()->can('update', $this->route('account'))`. Rules from SpendWiseController line 88-96: purpose (required|in:personal,business,mixed,investment), nickname (nullable|string|max:100), business_name (nullable|string|max:200), tax_entity_type (nullable|in:sole_prop,llc,s_corp,c_corp,partnership,personal), ein (nullable|string|max:20), include_in_spending (nullable|boolean), include_in_tax_tracking (nullable|boolean).

2. **AnswerQuestionRequest** -- authorize: `$this->user()->can('update', $this->route('question'))`. Rules from line 352: answer (required|string|max:200).

3. **BulkAnswerRequest** -- authorize: return true (individual ownership checked in controller loop). Rules from line 366-370: answers (required|array), answers.*.question_id (required|integer|exists:ai_questions,id), answers.*.answer (required|string|max:200).

4. **UpdateTransactionCategoryRequest** -- authorize: `$this->user()->can('update', $this->route('transaction'))`. Rules from line 425-428: category (required|string|max:100), expense_type (nullable|in:personal,business,mixed), tax_deductible (nullable|boolean).

5. **ExportTaxRequest** -- authorize: return true. Rules from line 811: year (required|integer|min:2020|max:{current year}). Use dynamic max: `'max:' . now()->year`.

6. **SendToAccountantRequest** -- authorize: return true. Rules from line 845-849: year (required|integer|min:2020|max:{current year}), accountant_email (required|email|max:255), accountant_name (nullable|string|max:255), message (nullable|string|max:1000).

7. **SetSavingsTargetRequest** -- authorize: return true. Rules from line 514-517: monthly_target (required|numeric|min:1|max:100000), motivation (nullable|string|max:200), goal_total (nullable|numeric|min:0).

8. **UpdateFinancialProfileRequest** -- authorize: return true. Rules from line 919-926: employment_type (nullable|in:employed,self_employed,freelancer,business_owner), business_type (nullable|string|max:200), has_home_office (nullable|boolean), tax_filing_status (nullable|in:single,married,head_of_household), estimated_tax_bracket (nullable|integer|in:10,12,22,24,32,35,37), monthly_income (nullable|numeric|min:0), monthly_savings_goal (nullable|numeric|min:0).
  </action>
  <verify>
1. `php artisan tinker --execute="echo class_exists('App\Http\Resources\TransactionResource') ? 'yes' : 'no';"` outputs "yes" (repeat for all 8 resources)
2. `php artisan tinker --execute="echo class_exists('App\Http\Requests\UpdateAccountPurposeRequest') ? 'yes' : 'no';"` outputs "yes" (repeat for all 8 requests)
3. Verify no syntax errors: `php -l app/Http/Resources/*.php && php -l app/Http/Requests/UpdateAccountPurposeRequest.php app/Http/Requests/AnswerQuestionRequest.php app/Http/Requests/BulkAnswerRequest.php app/Http/Requests/UpdateTransactionCategoryRequest.php app/Http/Requests/ExportTaxRequest.php app/Http/Requests/SendToAccountantRequest.php app/Http/Requests/SetSavingsTargetRequest.php app/Http/Requests/UpdateFinancialProfileRequest.php`
  </verify>
  <done>
All 8 API Resources exist with proper field mappings, conditional relationship loading, and float casts for monetary values. All 8 Form Requests exist with validation rules extracted verbatim from SpendWiseController, with policy authorization where applicable.
  </done>
</task>

<task type="auto">
  <name>Task 2: Split SpendWiseController into 10 focused controllers</name>
  <files>
    app/Http/Controllers/Api/DashboardController.php
    app/Http/Controllers/Api/PlaidController.php
    app/Http/Controllers/Api/BankAccountController.php
    app/Http/Controllers/Api/TransactionController.php
    app/Http/Controllers/Api/AIQuestionController.php
    app/Http/Controllers/Api/SubscriptionController.php
    app/Http/Controllers/Api/SavingsController.php
    app/Http/Controllers/Api/TaxController.php
    app/Http/Controllers/Api/EmailConnectionController.php
    app/Http/Controllers/Api/UserProfileController.php
  </files>
  <action>
Extract each method group from SpendWiseController into its target controller. Each controller:
- Extends `App\Http\Controllers\Controller`
- Injects required services via constructor (`private readonly ServiceClass $service`)
- Uses the FormRequest classes created in Task 1 instead of inline validation
- Returns API Resources instead of manual JSON construction
- Uses `$this->authorize()` for policy checks
- Imports ALL models it references (fix the missing BankAccount import from SpendWiseController)

**1. DashboardController** (method: `index`)
- Extract SpendWiseController::dashboard() (lines 143-277)
- NO constructor DI needed (no services used)
- Returns `JsonResponse` (composite data, NOT a single model resource)
- Import BankAccount (MISSING in SpendWiseController -- fix this)
- Replace the manual `->map(fn($tx) => [...])` for recent transactions with `TransactionResource::collection($recent)` BUT note: the dashboard has a simpler transaction format than the full list. Two options:
  a. Keep manual JSON for the dashboard summary (simpler, avoids over-engineering)
  b. Use TransactionResource but accept that format differs slightly from original
  RECOMMENDATION: Use `TransactionResource::collection($recent)` for recent transactions. The resource format is close enough and maintains consistency. For the other sections (summary, categories, trend, sync_status), return as-is in the JsonResponse since they're aggregate data.

**2. PlaidController** (methods: `createLinkToken`, `exchangeToken`, `sync`, `disconnect`)
- Extract SpendWiseController::createPlaidLinkToken() -> `createLinkToken()`
- Extract SpendWiseController::exchangePlaidToken() -> `exchangeToken()`
- Extract SpendWiseController::syncBank() -> `sync()`
- CREATE NEW `disconnect()` method (not in SpendWiseController): Calls `$this->plaidService->disconnect($connection)`, then returns JSON confirmation. The route expects `PlaidController@disconnect` with `{connection}` parameter (BankConnection model binding).
- Constructor: `private readonly PlaidService $plaidService`
- exchangeToken: Create an inline FormRequest or use simple validate for `public_token` (required|string). Since it's a single field, a dedicated FormRequest is overkill -- use inline validate here (only exception to the FormRequest rule).

**3. BankAccountController** (methods: `index`, `updatePurpose`)
- Extract SpendWiseController::accounts() -> `index()`
- Extract SpendWiseController::updateAccountPurpose() -> `updatePurpose()`
- Import `App\Models\BankAccount` (was MISSING in SpendWiseController)
- index: Use `BankAccountResource::collection($accounts)` for the accounts list. Keep the summary section as raw JSON.
- updatePurpose: Use `UpdateAccountPurposeRequest` instead of inline validation. Use `BankAccountResource` for the response.
- No service constructor DI needed (dispatches job directly)

**4. TransactionController** (methods: `index`, `updateCategory`)
- Extract SpendWiseController::transactions() -> `index()`
- Extract SpendWiseController::updateTransactionCategory() -> `updateCategory()`
- index: Return `TransactionResource::collection($query->paginate(...))` instead of raw `response()->json()`.
- updateCategory: Use `UpdateTransactionCategoryRequest`. Return `new TransactionResource($transaction->fresh())`.
- No service constructor DI needed for current methods.

**5. AIQuestionController** (methods: `index`, `answer`, `bulkAnswer`)
- Extract SpendWiseController::getQuestions() -> `index()`
- Extract SpendWiseController::answerQuestion() -> `answer()`
- Extract SpendWiseController::bulkAnswerQuestions() -> `bulkAnswer()`
- Constructor: `private readonly TransactionCategorizerService $categorizer`
- index: Return `AIQuestionResource::collection($questions)`.
- answer: Use `AnswerQuestionRequest`. Return JSON with TransactionResource for the transaction.
- bulkAnswer: Use `BulkAnswerRequest`. Keep the foreach loop for individual ownership checking.

**6. SubscriptionController** (methods: `index`, `detect`)
- Extract SpendWiseController::subscriptions() -> `index()`
- Extract SpendWiseController::detectSubscriptions() -> `detect()`
- Constructor: `private readonly SubscriptionDetectorService $detector`
- index: Use `SubscriptionResource::collection($subs)` for the list. Keep summary stats as raw JSON.

**7. SavingsController** (methods: `recommendations`, `analyze`, `dismiss`, `apply`, `setTarget`, `getTarget`, `regeneratePlan`, `respondToAction`, `pulseCheck`)
- Extract ALL savings methods from SpendWiseController (lines 470-754)
- Constructor: `private readonly SavingsAnalyzerService $analyzer, private readonly SavingsTargetPlannerService $planner`
- recommendations: Use `SavingsRecommendationResource::collection($recs)`. Keep summary stats.
- setTarget: Use `SetSavingsTargetRequest`. Return `SavingsTargetResource`.
- getTarget: Use `SavingsTargetResource` for target, `SavingsPlanActionResource::collection()` for actions.
- respondToAction: Add inline validation for response+rejection_reason (small scope, FormRequest overkill for this 2-field validate). OR create a small FormRequest. Per conventions, use inline -- it's a simple accept/reject.
  Actually, per CLAUDE.md conventions: "Form Request validation (never inline $request->validate() in controllers)". So create a `RespondToPlanActionRequest` form request for this too. It validates: response (required|in:accept,reject), rejection_reason (nullable|string|max:500).
  Wait -- the research says 8 Form Requests. Let's keep the plan consistent: create the 8 listed in research. For respondToAction, use inline validate as an exception since it's 2 fields and the research didn't list it. Actually -- follow CLAUDE.md strictly. Create it as a 9th FormRequest: `RespondToPlanActionRequest`. Add this file to the task.

**8. TaxController** (methods: `summary`, `export`, `sendToAccountant`, `download`)
- Extract SpendWiseController tax methods (lines 760-911)
- Constructor: `private readonly TaxExportService $exporter`
- export: Use `ExportTaxRequest`.
- sendToAccountant: Use `SendToAccountantRequest`.
- download: Keep as-is (returns BinaryFileResponse, not JSON).
- Keep the private `formatFileSize()` helper in TaxController.

**9. EmailConnectionController** (methods: `connect`, `callback`, `sync`, `disconnect`)
- CREATE AS STUBS -- no implementation exists in SpendWiseController for email connections.
- Each method returns a placeholder JSON: `response()->json(['message' => 'Email connection feature coming soon', 'status' => 'not_implemented'], 501)`
- This satisfies the route definitions in api.php. Full implementation comes in Phase 3.

**10. UserProfileController** (methods: `updateFinancial`, `showFinancial`, `deleteAccount`)
- Extract SpendWiseController::updateFinancialProfile() -> `updateFinancial()`
- updateFinancial: Use `UpdateFinancialProfileRequest`.
- showFinancial: New method that returns the user's financial profile (simple query + JSON response).
- deleteAccount: New method that deletes the user and all cascading data. Return 204.

**After creating all 10 controllers:**
- DELETE SpendWiseController.php (or rename to SpendWiseController.php.bak for reference).
- Verify routes resolve to the new controllers.

**CRITICAL: Add the 9th Form Request file.**
Create `app/Http/Requests/RespondToPlanActionRequest.php`:
- authorize: return true (ownership checked via savings_target relationship in controller)
- rules: response (required|in:accept,reject), rejection_reason (nullable|string|max:500)

Also add route model binding for `{rec}` (SavingsRecommendation) and `{action}` (SavingsPlanAction) in AppServiceProvider if not already there. Check existing route model bindings in AppServiceProvider -- it has transaction, account, question, subscription. Add:
```php
Route::model('rec', \App\Models\SavingsRecommendation::class);
Route::model('action', \App\Models\SavingsPlanAction::class);
Route::model('connection', \App\Models\BankConnection::class);
```
  </action>
  <verify>
1. `php artisan route:list --path=api/v1` shows routes pointing to DashboardController, PlaidController, BankAccountController, TransactionController, AIQuestionController, SubscriptionController, SavingsController, TaxController, EmailConnectionController, UserProfileController (NOT SpendWiseController)
2. `php artisan route:list --path=api/auth` shows routes pointing to AuthController, SocialAuthController, TwoFactorController, PasswordResetController, EmailVerificationController
3. `grep -r "SpendWiseController" app/Http/Controllers/Api/ routes/` returns NO results (controller fully decomposed)
4. `php -l app/Http/Controllers/Api/DashboardController.php` (and all 9 others) -- no syntax errors
5. `php artisan about` still boots without errors
6. Verify DI works: `grep -l "private readonly" app/Http/Controllers/Api/*.php` returns PlaidController, AIQuestionController, SubscriptionController, SavingsController, TaxController (5 controllers with service injection)
7. Verify FormRequests used: `grep -rl "FormRequest\|Request " app/Http/Controllers/Api/*.php` shows controllers importing custom FormRequests
  </verify>
  <done>
SpendWiseController is fully decomposed into 10 focused controllers. All routes in api.php resolve to the correct new controllers. Each controller uses constructor DI for services, policy authorization for access control, API Resources for JSON output, and FormRequest classes for validation. EmailConnectionController has stub methods returning 501. SpendWiseController is removed. Route model bindings updated for rec, action, connection parameters.
  </done>
</task>

</tasks>

<verification>
1. `php artisan serve` starts without errors
2. `php artisan route:list --path=api` shows ALL routes resolving to 10 separate API controllers + 5 auth controllers
3. `grep -r "SpendWiseController" routes/ app/Http/Controllers/` returns empty (fully decomposed)
4. `find app/Http/Resources -name "*.php" | wc -l` returns 8 (all API Resources created)
5. `find app/Http/Requests -name "*.php" -not -path "*/Auth/*" | wc -l` returns 9 (8 listed + RespondToPlanActionRequest)
6. `php -l app/Http/Controllers/Api/*.php && php -l app/Http/Resources/*.php && php -l app/Http/Requests/*.php` -- all pass syntax check
7. Each controller with write methods imports FormRequest classes (not using inline `$request->validate()`):
   ```
   grep -c "validate\[" app/Http/Controllers/Api/*.php
   ```
   Should return 0 for all controllers (except possibly PlaidController's exchangeToken if inline validate was kept -- but per CLAUDE.md conventions, even this should use a FormRequest).
</verification>

<success_criteria>
- 10 API controllers exist in app/Http/Controllers/Api/, each with proper constructor DI, policy auth, and resource returns
- SpendWiseController.php is removed (or backed up)
- 8 API Resources exist in app/Http/Resources/ with proper field mappings and conditional relationships
- 9 Form Requests exist in app/Http/Requests/ (8 from research + RespondToPlanActionRequest)
- php artisan route:list shows all API routes pointing to the new controllers
- No inline $request->validate() in any controller (all extracted to FormRequest classes)
- Route model bindings added for rec, action, connection parameters
- Application boots and all routes resolve without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-scaffolding-api-architecture/01-02-SUMMARY.md`
</output>
