# ─────────────────────────────────────────────
# SPENDIFIAI — Environment Configuration
# ─────────────────────────────────────────────
# Copy to .env and fill in your values

APP_NAME=SpendifiAI
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost:8000
FRONTEND_URL=http://localhost:5173

# ─── Database (PostgreSQL recommended) ───
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=spendifiai
DB_USERNAME=spendifiai
DB_PASSWORD=

# ─── Redis (required for queues + caching) ───
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
CACHE_STORE=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# ─── Mail (for password resets, tax exports, notifications) ───
# Supported: smtp, mailgun, ses, postmark, log
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD="your-app-password"
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@spendifiai.com
MAIL_FROM_NAME="${APP_NAME}"

# Gmail App Password instructions:
# 1. Go to Google Account → Security → 2-Step Verification → ON
# 2. Go to Google Account → Security → App Passwords
# 3. Create app password for "Mail" → use that 16-char password above
#
# OR use a transactional service:
# MAIL_MAILER=mailgun
# MAILGUN_DOMAIN=mg.spendifiai.com
# MAILGUN_SECRET=key-xxxxxxx
#
# MAIL_MAILER=ses
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1

# ─── Plaid (Bank Integration) ───
# Dashboard: https://dashboard.plaid.com/developers/keys
PLAID_CLIENT_ID=
PLAID_SECRET=
PLAID_ENV=sandbox
# Environments:
#   sandbox     = Fake data, free, no approval needed (test creds: user_good / pass_good)
#   development = Real banks, 100-user limit, requires Plaid approval
#   production  = Real banks, unlimited, requires security questionnaire + approval
#
# Webhook URL (optional in sandbox, required in production):
# PLAID_WEBHOOK_URL=https://yourdomain.app/api/v1/webhooks/plaid

# ─── Anthropic (AI Categorization) ───
# Get key at https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# ─── Google OAuth (Social Login + Email Connection) ───
# Console: https://console.cloud.google.com/apis/credentials
# Enable: Google+ API (for login)
# Enable: Gmail API (only needed for email connection feature on Connect page)
# Authorized redirect: {APP_URL}/auth/google/callback
#
# Login uses basic scopes only (openid, email, profile) — no Gmail access at login.
# Gmail scopes (gmail.readonly) are requested separately when users connect their
# email on the Connect page via GmailService's own OAuth flow.
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI="${APP_URL}/auth/google/callback"

# ─── Google reCAPTCHA v3 ───
# Get keys at https://www.google.com/recaptcha/admin
# Choose reCAPTCHA v3 (invisible, score-based)
RECAPTCHA_SITE_KEY=
RECAPTCHA_SECRET_KEY=
RECAPTCHA_THRESHOLD=0.5

# ─── Sanctum (API Auth) ───
SANCTUM_STATEFUL_DOMAINS=localhost,localhost:5173,127.0.0.1

# ─── Two-Factor Authentication ───
# Users can optionally enable 2FA via Google Authenticator / Authy
TWO_FACTOR_ENABLED=true

# ─── Session / Security ───
SESSION_LIFETIME=120
SESSION_ENCRYPT=true

# ─── Logging ───
LOG_CHANNEL=daily
LOG_LEVEL=debug
